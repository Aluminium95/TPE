Dans ce TPE dédié à la réalisation d'une simulation, nous allons devoir poser quelques bases de la programmation rapidement. Nous parlerons uniquement de la programmation en Vala, le langage choisi, de manière à se concentrer sur le fond, plutôt que sur la forme, car d'autres langages utilisent des concepts identiques mais avec des syntaxes parfois singulièrement différentes.

Nous tenterons de mettre en relation la programmation et les mathématiques, de manière à bien faire comprendre des concepts qui peuvent paraître abstrait de prime abord.

Vala est un langage dit «~haut niveau~», c'est à dire qu'il permet de faire simplement des choses complexes, et qu'il permet à certain moment une certaine abstraction du fonctionnement de la machine. Contrairement à des langages dits «~bas niveau~» qui collent directement au fonctionnement de la machine. Il en découle que ce que nous dirons ici, n'est valable que pour une certaine catégories de langages, et que la syntaxe que nous utiliserons, dans un souci de simplicité, sera uniquement celle du Vala.

Si vous avez déjà quelques notions en algorithmie, vous n'aurez pas besoin de lire le chapitre sur les variables, mais le chapitre sur les fonctions vous sera utile quelque soit votre niveau.

\section{Variables}
  Les variables sont le concept de base d'un programme. Une variable est une boite, sur laquelle on pose une étiquette, et dans laquelle on met une valeur. 
  \begin{lstlisting}
    int a = 6;
  \end{lstlisting}
  Ce code crée une boite étiquetée «~a~» qui est de type «~int~»\footnote{int est l'abréviation d'integer, soit un nombre entier. La liste des principaux types du vala est visible dans l'annexe \ref{DefTypes}}, et qui a pour valeur «~6~», le point virgule signifie la fin d'une commande. Cette opération est nommée affectation.
  
  En parlant d'opération, il en existe un certain nombre : 
  \begin{itemize}
    \item addition avec le symbole «~+~»
    \item soustraction avec le symbole «~-~»
    \item division avec le symbole «~/~»
    \item multiplication avec le symbole «~*~»
    \item modulo\footnote{Le modulo est le reste d'une division euclidienne} avec le symbole «~\%~»
  \end{itemize}
  
  La priorité opératoire suit les mêmes idiomes que les mathématiques. Les calculs peuvent comporter des variables : 
  \begin{lstlisting}
    int a = 3;
    int b = a * 6; // b = a * 6 => 3 * 6 => 18 
    a = b + 3;
  \end{lstlisting}
  
  Après avoir définit une variable, son contenu peut encore changer durant le reste du programme.
  
\section{Contrôles}
  Encore une fois cette section peut être passée par les personnes qui ont déjà une idée sur l'algorithmie.
  Les structures de contrôle sont une partie d'un langage, voici des contrôles les plus courants en Vala :
  \begin{description}
    \item[ if (condition) { code } else if (condition) { code } else { code } ] : si une condition est vraie alors on exécute le code entre accolades, sinon si une autre est vraie\footnote{Sous-entendu uniquement si la précédente à échoué} on exécute le code entre accolades, sinon si aucune des précédentes n'a été vérifiée on exécute le code entre accolades
    \item[while (condition) { code }] : tant qu'une condition est vérifier, exécuter le code suivant
    \item[for (a = depart; condition; a += ?) { code }] : effectue la boucle tant que la condition est vraie, mais à chaque fois, la variable a est modifiée, généralement on met \texttt{a} dans la condition de manière à répéter un certain nombre de fois une action.
  \end{description}
  
  Exemples :
  \begin{lstlisting}
    int a = 5;
    while (a < 60) { // tant que a < 60
      a = a*2; //  on le multiplie par 2
    }
    
    if (a > 80) {
      a = 80;
    } else if ( a > 70) {
      a = 70;
    } else {
      a = 60;
    }
  \end{lstlisting}
  
  Le but de cette annexe n'est pas d'apprendre à programmer, mais à donner certaines connaissances indispensables à la compréhension du TPE. Du moment que le concept est saisi, vous pouvez passez à la suite.

\section{Fonctions}
  Les fonctions en programmation sont en réalité très similaires aux fonctions mathématiques. Si on définit par exemple en mathématique une fonction : 
  \[ f(x) = x^2 + 3x + 5 \]
  En Vala on la notera :
  \begin{lstlisting}
    // le int devant le f indique le type de la valeur de retour
    int f (int x) {
      return x * x + 3 * x + 5; // la fonction renvoie la valeur du calcul suivant
    }
  \end{lstlisting}
  
  La grande différence est que en Vala il faut préciser le type d'entrée et le type de retour, car il n'y a pas que des entier quand on programme. Sinon tout est assez proche. Pour l'utilisation de notre fonction :
  \begin{lstlisting}
    int a = f(56); // a prend la valeur du retour de la fonction f
  \end{lstlisting}
  
  Mais une fonction en programmation est bien plus qu'une fonction mathématique, parce qu'elle peut faire autre chose que retourner une valeur, et avoir plus d'un paramètre, par exemple :
  \begin{lstlisting}
    int puissance (int x, int pow) {
      int i;
      int retour = 1;
      for (i = 0; i < pow; i++) {
        retour = retour * x;
      }
      return retour;
    }
  \end{lstlisting}
  
  Ici on utilise une boucle pour effectuer un certain nombre d'action, mais on peut aussi utiliser une fonction dite «~récursive~» c'est à dire qui s'appelle elle même lors de son exécution : 
  \begin{lstlisting}
    int factorielle (int x) {
      if (x == 1) { 
        return 1;
      } else {
        return factorielle (x - 1) * x;
      }
    }
  \end{lstlisting}
  
  Attention, il faut bien définir au moins un cas ou la fonction ne s'appelle pas, sinon elle est infinie !
  
  Les fonction peuvent prendre des paramètres de n'importe quel type, elles peuvent avoir une valeur de retour de n'importe quel type, et peuvent faire autant de calculs intermédiaires qu'elles veulent avant de donner une valeur de retour, ou même de ne renvoyer aucune valeur. Par exemple la fonction de la SDL qui permet d'afficher un pixel à l'écran, ne renvoie rien, elle se contente d'afficher un pixel.
